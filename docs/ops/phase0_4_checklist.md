# –≠—Ç–∞–ø 0.4: –ß–µ–∫-–ª–∏—Å—Ç –æ–±–ª–∞—á–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–¶–µ–ª—å:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –±–∞–∑–æ–≤—É—é –æ–±–ª–∞—á–Ω—É—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è Go2Asia v2.

---

## ‚úÖ –ó–∞–¥–∞—á–∏ —ç—Ç–∞–ø–∞ 0.4

### 1. –î–æ–º–µ–Ω –∏ DNS

- [x] **–î–æ–º–µ–Ω –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω**
  - [x] –î–æ–º–µ–Ω `go2asia.space` –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∏ –∞–∫—Ç–∏–≤–µ–Ω
  - [x] –î–æ–º–µ–Ω –¥–æ–±–∞–≤–ª–µ–Ω –≤ Cloudflare (DNS –∑–æ–Ω–∞ —Å–æ–∑–¥–∞–Ω–∞)

- [x] **DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã**
  - [x] `go2asia.space` ‚Üí CNAME –Ω–∞ Netlify (production —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥) - –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω
  - [x] `www.go2asia.space` ‚Üí CNAME –Ω–∞ `go2asia.space` (—Ä–µ–¥–∏—Ä–µ–∫—Ç) - –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω
  - [x] `api.go2asia.space` ‚Üí CNAME –Ω–∞ API Gateway Worker - –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω
  - [x] `auth.go2asia.space` ‚Üí CNAME –Ω–∞ Auth Service Worker - –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω
  - [x] `content.go2asia.space` ‚Üí CNAME –Ω–∞ Content Service Worker - –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω
  - [x] `token.go2asia.space` ‚Üí CNAME –Ω–∞ Token Service Worker - –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω
  - [x] `media.go2asia.space` ‚Üí R2 bucket `go2asia-media` - –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω
  - [x] –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏: `connect`, `chain`, `risk`, `stats`, `rf-api` - –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã
  - [x] –í—Å–µ –∑–∞–ø–∏—Å–∏ –∏–º–µ—é—Ç –≤–∫–ª—é—á—ë–Ω–Ω–æ–µ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ (üüß orange cloud)

### 2. Cloudflare CDN –∏ WAF

- [ ] **SSL/TLS –Ω–∞—Å—Ç—Ä–æ–µ–Ω**
  - [ ] –†–µ–∂–∏–º: Full (strict)
  - [ ] Always Use HTTPS –≤–∫–ª—é—á–µ–Ω–æ
  - [ ] HSTS –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –ø–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏)

- [ ] **WAF –≤–∫–ª—é—á–µ–Ω**
  - [ ] OWASP Core Ruleset –≤–∫–ª—é—á–µ–Ω
  - [ ] Bot Fight Mode –≤–∫–ª—é—á–µ–Ω (–µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å SEO)
  - [ ] –ü—Ä–∞–≤–∏–ª–∞ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö endpoint'–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã:
    - [ ] `/api/auth/*` - —Ä–µ–∂–∏–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
    - [ ] `/api/payments/*` - —Ä–µ–∂–∏–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
    - [ ] `/api/referral/*` - —Ä–µ–∂–∏–º –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏

- [ ] **Rate Limiting –Ω–∞—Å—Ç—Ä–æ–µ–Ω**
  - [ ] `/api/auth/login` - 5 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç–∞
  - [ ] `/api/auth/send-code` - 3 –∑–∞–ø—Ä–æ—Å–∞/5 –º–∏–Ω—É—Ç
  - [ ] `/api/places/search` - 20 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç–∞
  - [ ] `/api/events` - 60 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç–∞

- [ ] **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ**
  - [ ] –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (`/_next/static/*`) –∫—ç—à–∏—Ä—É—é—Ç—Å—è (TTL: 1 –º–µ—Å—è—Ü)
  - [ ] API –∑–∞–ø—Ä–æ—Å—ã (`/api/*`) –Ω–µ –∫—ç—à–∏—Ä—É—é—Ç—Å—è (Bypass)
  - [ ] –ü—Ä–∞–≤–∏–ª–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ Page Rules –∏–ª–∏ Rulesets

### 3. Cloudflare R2 –¥–ª—è –º–µ–¥–∏–∞

- [x] **R2 Bucket —Å–æ–∑–¥–∞–Ω/–ø—Ä–æ–≤–µ—Ä–µ–Ω**
  - [x] Bucket `go2asia-media` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
  - [x] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤ —Å–æ–∑–¥–∞–Ω–∞: `country/`, `city/`, `place/`
  - [x] Bucket Size: 8.21 MB (–Ω–∞—á–∞–ª—å–Ω–∞—è —Å—Ç–∞–¥–∏—è)
  - [x] Public Access: Enabled

- [x] **–ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –Ω–∞—Å—Ç—Ä–æ–µ–Ω**
  - [x] Custom Domain `media.go2asia.space` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ R2
  - [x] DNS –∑–∞–ø–∏—Å—å –¥–ª—è `media.go2asia.space` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∞
  - [ ] CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞) - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

- [ ] **Secrets –¥–ª—è R2 (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã)**
  - [ ] `R2_ACCESS_KEY_ID` –¥–æ–±–∞–≤–ª–µ–Ω –≤ GitHub Secrets (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∏–∑ CI/CD)
  - [ ] `R2_SECRET_ACCESS_KEY` –¥–æ–±–∞–≤–ª–µ–Ω –≤ GitHub Secrets (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–µ–Ω –¥–æ—Å—Ç—É–ø –∏–∑ CI/CD)

### 4. Cloudflare Workers

- [x] **Workers –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã (staging)**
  - [x] `go2asia-api-gateway-staging` —Å–æ–∑–¥–∞–Ω
  - [x] `go2asia-auth-service-staging` —Å–æ–∑–¥–∞–Ω
  - [x] `go2asia-content-service-staging` —Å–æ–∑–¥–∞–Ω
  - [x] `go2asia-referral-service-staging` —Å–æ–∑–¥–∞–Ω
  - [x] `go2asia-token-service-staging` —Å–æ–∑–¥–∞–Ω
  - [ ] Production Workers —Å–æ–∑–¥–∞–Ω—ã (–µ—Å–ª–∏ –Ω—É–∂–Ω—ã –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ)

- [ ] **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –º–æ–Ω–æ—Ä–µ–ø–æ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞**
  - [ ] `services/api-gateway/` —Å–æ–∑–¥–∞–Ω
  - [ ] `services/auth-service/` —Å–æ–∑–¥–∞–Ω
  - [ ] `services/content-service/` —Å–æ–∑–¥–∞–Ω
  - [ ] `services/referral-service/` —Å–æ–∑–¥–∞–Ω
  - [ ] `services/token-service/` —Å–æ–∑–¥–∞–Ω
  - [ ] –ë–∞–∑–æ–≤—ã–µ `wrangler.toml` –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
  - [ ] –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ `src/index.ts` —Å–æ–∑–¥–∞–Ω—ã

- [x] **–î–µ–ø–ª–æ–π Workers –Ω–∞—Å—Ç—Ä–æ–µ–Ω**
  - [x] GitHub Actions workflows –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –¥–µ–ø–ª–æ—è Workers
  - [x] Secrets `CLOUDFLARE_API_TOKEN` –∏ `CLOUDFLARE_ACCOUNT_ID` –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ GitHub
  - [ ] –¢–µ—Å—Ç–æ–≤—ã–π –¥–µ–ø–ª–æ–π –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ (–ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ –º–æ–Ω–æ—Ä–µ–ø–æ)

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [x] **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞**
  - [x] `docs/ops/cloudflare_setup.md` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å –¥–æ–º–µ–Ω–æ–º `go2asia.space`
  - [x] –†–∞–∑–¥–µ–ª –ø—Ä–æ R2 –¥–æ–±–∞–≤–ª–µ–Ω/–æ–±–Ω–æ–≤–ª–µ–Ω
  - [x] –†–∞–∑–¥–µ–ª –ø—Ä–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é Workers –¥–æ–±–∞–≤–ª–µ–Ω
  - [x] `docs/plans/PHASE_0_PROGRESS.md` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ —ç—Ç–∞–ø–∞ 0.4

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. **DNS —Ä–µ–∑–æ–ª–≤–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:**
   ```bash
   dig go2asia.space
   dig api.go2asia.space
   dig staging-api.go2asia.space
   ```

2. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç:**
   - –û—Ç–∫—Ä—ã—Ç—å `https://go2asia.space` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–∞–ª–∏–¥–µ–Ω
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç —Å HTTP –Ω–∞ HTTPS

3. **Workers –æ—Ç–≤–µ—á–∞—é—Ç:**
   - –û—Ç–∫—Ä—ã—Ç—å `https://api.go2asia.space` (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –±–∞–∑–æ–≤—ã–π –æ—Ç–≤–µ—Ç)
   - –û—Ç–∫—Ä—ã—Ç—å `https://staging-api.go2asia.space` (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –±–∞–∑–æ–≤—ã–π –æ—Ç–≤–µ—Ç)

4. **R2 –¥–æ—Å—Ç—É–ø–µ–Ω (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω):**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ `https://media.go2asia.space` (–¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å R2 bucket –∏–ª–∏ –æ—à–∏–±–∫—É 404, –Ω–æ –Ω–µ –æ—à–∏–±–∫—É DNS)

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–¥–∞—á–∏ —Ç—Ä–µ–±—É—é—Ç –¥–µ–π—Å—Ç–≤–∏–π –≤ Cloudflare Dashboard (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ DNS, WAF, R2)
- Workers –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —á–µ—Ä–µ–∑ Wrangler CLI –∏–ª–∏ Cloudflare Dashboard
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –æ—Ç—Ä–∞–∂–∞—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ß–∞—Å—Ç–∏—á–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω (–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –≤ –º–æ–Ω–æ—Ä–µ–ø–æ)  
**–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞:** 2025-12-12  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-12-12

## üìã –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ:
- –î–æ–º–µ–Ω `go2asia.space` –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ Cloudflare
- DNS –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (–≤—Å–µ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã)
- R2 bucket `go2asia-media` —Å–æ–∑–¥–∞–Ω, –ø—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø –≤–∫–ª—é—á–µ–Ω, Custom Domain –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- 5 staging Workers —Å–æ–∑–¥–∞–Ω—ã –≤ Cloudflare Dashboard
- GitHub Secrets –¥–ª—è Cloudflare –¥–æ–±–∞–≤–ª–µ–Ω—ã

### ‚è≥ –¢—Ä–µ–±—É–µ—Ç—Å—è:
- –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ –º–æ–Ω–æ—Ä–µ–ø–æ (`services/*/`)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `wrangler.toml` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ `src/index.ts` —Ñ–∞–π–ª—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSL/TLS, WAF, Rate Limiting (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)
- –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ GitHub Actions

